# 03-5-特效

## 防抖

```js
// 防抖是每n秒执行一次函数（秒数自己控制）
var debounce = function (fn, wait) {
    var timer = null;
    return function () {
        if (timer !== null) clearTimeout(timeout)
        timer = setTimeout(fn, wait)
    }
}
```

## 节流

```js
// 节流是n秒内只执行一次函数（秒数自己控制）
var throttle = function (func, delay) {
    var timer = null;
    return function () {
        var context = this;
        var args = arguments;
        if (!timer) {
            timer = setTimeout(function () {
                func.apply(context, args);
                timer = null;
            }, delay)
        }
    }
}  
```

## 深复制

```js
// 可以用Object.getPrototypeOf(obj)代替obj.__proto__
const clone = (source, target={}) => {
    let target = {}
    let names = Object.getOwnPropertyNames(source)
    for (let i = 0; i < names.length; i++) {
        let desc = Object.getOwnPropertyDescriptor(source, names[i])
        if (typeof desc.value === 'Object' && desc.value !== null) {
            let objs
            if (desc.value.constructor === Date) {
                objs = new desc.value.constructor(desc.value)
            } else if (desc.value.constructor === RegExp) {
                objs = new desc.value.constructor(desc.value.source, desc.value.flags)
            } else if (desc.value.__proto__.__proto__ && desc.value.__proto__.__proto__.constructor === HTMLElement) {
                objs = document.createElement(desc.value.nodeName)
            } else {
                objs = new desc.value.constructor()
            }
            Object.defineProperty(target, names[i], {
                configurable: desc.confugurable,
                enumerable: desc.enumerable,
                writable: desc.writable,
                value: objs
            })
            clone(objs, desc.value)
        } else {
            Object.defineProperty(target, names[i], desc)
        }
    }
    return target
}
```

## 拖拽

```js

```

## 弹出层

```js

```

## 放大镜

```js

```

## 模拟滚动条

```html

```

## 回到顶部

```js

```
