# 第五章 引用类型

## 基本类型判断

### 1.数组
  
```js
var L = [1, "blue", "qqq"]
Array.isArray(L)
```

### 2.字符串

```js
var s = "12sd"
typeof s == "string"
```

### 3

## 数组对象

### 1.转换方法

```js
colors.toString() // 返回以逗号连接的字符串
colors.valueOf() // 还是返回数组
```

### 2.栈方法

```js
// 都会改变原数组
colors.push("black", "blue") // 在最后推入两项
colors.pop() // 从最后取得一项
```

### 3.队列方法

```js
// 都会改变原数组
colors.push("black") // 在最后推入一项
colors.shift() // 从最前取得一项
colors.unshift("red", "cherry") // 从最前插入两项
```

### 4.重排序方法

```js
// 都会改变原数组
colors.reverse() // 反转数组顺序
colors.sort(function (value1, value2) {
  if (value1 < value2) {
    return -1
  } else if (value1 > value2) {
    return 1
  } else {
    return 0
  }
})// 默认升序,转为字符串后排
```

### 5.操作方法

```js
var colors1 = colors.concat("yellow", ["black", "brown"])
var colors2 = colors.slice(1) // 类似python切片 colors[1:]
var colors3 = colors.slice(1, 4) // 类似python切片 colors[1:4]
// 会改变原数组
colors.splice(0, 1) // 从位置0处删一项
colors.splice(1, 0, "yellow", "orange") // 从位置1处插入2项
colors.splice(1, 1, "red", "purple") // 将位置1处的一项替换为 "red", "purple" 这两项
```

### 6.位置方法

```js
// 查不到返回 -1
colors.indexOf("black") // 正向 默认起始位置为0
colors.indexOf("black", 1)
colors.lastIndexOf("black") // 反向
colors.lastIndexOf("black", 2)
```

### 7.迭代方法

```js
// 都不会修改数组中的包含的值
var numbers = [1, 2, 3, 4, 5, 4, 3, 2, 1]
var everyResult = numbers.every(function (item, index, arr) {
  return item > 2 // 对每一项都运行给定函数,均为true,则返回true
}) // false
var someResult = numbers.some(function (item, number, arr) {
  return item > 2 // 对每一项都运行给定函数,有一项为true,则返回true
}) // true
var filterResult = numbers.filter(function (item, index, arr) {
  return item > 2 // 对数组中的每一项运行给定函数，返回该函数会返回 true 的项组成的数组
}) // [3, 4, 5, 3, 4]
var mapResult = numbers.map(function (item, index, arr) {
  return item * 2 // 对数组中的每一项运行给定函数，返回每次函数调用的结果组成的数组
}) // [2, 4, 6, 8, 10, 8, 6, 4, 2]
numbers.forEach(function (item, index, arr) {
  // 执行某些操作
})
```

### 8.归并方法

```js
// 会迭代数组的所有项，然后构建一个最终返回的值
// 接收 4 个参数：前一个值、当前值、项的索引和数组对象
var values = [1, 2, 3, 4, 5]
var sum = values.reduce(function (prev, cur, index, arr) {
  return prev + cur // 正向
}) // 15
var sum = values.reduceRight(function (prev, cur, index, arr) {
  return prev + cur // 逆向
}) // 15
```

## Date对象

### 1.获得开始时间

```js
var start = Date.now() // 1560396582397
```  

### 2.获得/设置当前时间

```js
var now = new Date()
now.getFullYear() // 取得4位数的年份（如2007而非仅07）
now.setFullYear(年) // 设置日期的年份。传入的年份值必须是4位数字（如2007而非仅07）
now.getMonth() // 返回日期中的月份，其中0表示一月，11表示十二月
now.setMonth(月) // 设置日期的月份。传入的月份值必须大于0，超过11则增加年份
now.getDate() // 返回日期月份中的天数（1到31）
now.setDate(日) // 设置日期月份中的天数。如果传入的值超过了该月中应有的天数，则增加月份
now.getDay() // 返回日期中星期的星期几（其中0表示星期日，6表示星期六）
now.getHours() // 返回日期中的小时数（0到23）
now.setHours(时) // 设置日期中的小时数。传入的值超过了23则增加月份中的天数
now.getMinutes() // 返回日期中的分钟数（0到59）
now.setMinutes(分) // 设置日期中的分钟数。传入的值超过59则增加小时数
now.getSeconds() // 返回日期中的秒数（0到59）
now.setSeconds(秒) // 设置日期中的秒数。传入的值超过了59会增加分钟数
now.getMilliseconds() // 返回日期中的毫秒数
now.setMilliseconds(毫秒) // 设置日期中的毫秒数
```

## RegExp 类型

`var expression = / pattern / flags`

### flags

- g：表示全局（global）模式，即模式将被应用于所有字符串，而非在发现第一个匹配项时立即停止；
- i：表示不区分大小写（case-insensitive）模式，即在确定匹配项时忽略模式与字符串的大小写；
- m：表示多行（multiline）模式，即在到达一行文本末尾时还会继续查找下一行中是否存在与模式匹配的项。

### 实例方法

1. test()

    ```js
    var pattern = /e/gi
    pattern.test("The best things in life are free!") // 返回true or false
    ```

2. exec()

    ```js
    var pattern = /e/gi
    pattern.test("The best things in life are free!") // 返回一个数组 若没匹配到则返回null
    ```

### 支持正则表达式的 String 对象的方法

1. match()方法

    ```js
    var str="The rain in SPAIN stays mainly in the plain"
    var n=str.match(/ain/g) // 返回一个数组 ["ain", "ain", "ain"]
    ```

2. search() 方法

    ```js
    var str="Visit Runoob!"
    var n=str.search("Runoob") // 返回查找到的起始位置 未找到返回-1
    ```

3. replace() 方法

    ```js
    var str="Mr Blue has a blue house and a blue car"
    var n=str.replace(/blue/g,"red") // 返回替换后的字符串
    ```

4. split() 方法

```js
var str="How are you doing today?"
var n=str.split(/you/gi) // 返回 ["How are ", " doing today?"]
```

## Function 类型

### 函数方法

1. apply()

    ```js
    function sum(num1, num2){
    return num1 + num2
    }
    function callSum1(num1, num2){
    return sum.apply(this, arguments) // 传入 arguments 对象
    }
    function callSum2(num1, num2){
    return sum.apply(this, [num1, num2]) // 传入数组
    }
    alert(callSum1(10,10)) //20
    alert(callSum2(10,10)) //20
    ```

2. call()

    ```js
    function sum(num1, num2){
    return num1 + num2;
    }
    function callSum(num1, num2){
    return sum.call(this, num1, num2) // 参数挨着传递
    }
    alert(callSum(10,10)); //20
    ```

## String类型

### 1.字符方法

```js
str.charAt(1) // 返回位置1处的字符
str.charCodeAt(1) // 返回位置1处的字符asc码
str[1] // 返回位置1处的字符
```

### 2.字符串操作方法

```js
// 均不会修改原字符串
str.concat("hello") // 拼接字符串
str.slice() // 截取字符串 开始位置 结束位置 参数为负数时：参数+字符串长度
str.substr() // 截取字符串 开始位置 截取的个数 参数为负数时：负的第一个参数加上字符串的长度，而将负的第二个参数转换为0
str.substring() // 截取字符串 开始位置 结束位置 参数为负数时：把所有负值参数都转换为 0
```

### 3.字符串位置方法

```js
str.indexOf(searchString, position?)
str.lastIndexOf(searchString, position?)
```

### 4.trim()方法

```js
str.trim() // 删除前后的所有空格 不会修改原字符串
```

### 5.字符串大小写转换方法

```js
// 不会改变愿字符串
str.toLowerCase() // 转为小写
str.toLocaleLowerCase()
str.toUpperCase() // 转为大写
str.toLocaleUpperCase()
```

### 6.字符串模式匹配方法

```js
// 均不会改变原字符串
str.match()
str.search()
str.split()
str.replace()
```

### 7.localCompare()方法

```js
// 取决于实现
str.localCompare(str1) // str大于str1为负 等于为0 小于为正
```

### 8.fromCharCode()构造函数方法

```js
String.fromCharCode(104, 101, 108, 108, 111) // "hello"
```

## Global对象

```js
encodeURI()
encodeURIComponent()
decodeURI()
decodeURIComponent()
parseInt()
parseFloat()
isFinite()
isNaN()
Number()
String()
```

## Math对象

### Math对象属性

```js
Math.E // 自然对数的底数，即常量e的值
Math.LN10 // 10的自然对数
Math.LN2 // 2的自然对数
Math.LOG2E // 以2为底e的对数
Math.LOG10E // 以10为底e的对数
Math.PI // π的值
Math.SQRT1_2 // 1/2的平方根(即2的平方根的倒数)
Math.SQRT2 // 2的平方根
```

### Math对象方法

```js
abs(x) // 返回数的绝对值。
acos(x) // 返回数的反余弦值。
asin(x) // 返回数的反正弦值。
atan(x) // 以介于 -PI/2 与 PI/2 弧度之间的数值来返回 x 的反正切值。
atan2(y,x) // 返回从 x 轴到点 (x,y) 的角度（介于 -PI/2 与 PI/2 弧度之间）。
ceil(x) // 对数进行上舍入。
cos(x) // 返回数的余弦。
exp(x) // 返回 e 的指数。
floor(x) // 对数进行下舍入。
log(x) // 返回数的自然对数（底为e）。
max(x,y) // 返回 x 和 y 中的最高值。
min(x,y) // 返回 x 和 y 中的最低值。
pow(x,y) // 返回 x 的 y 次幂。
random() // 返回 0 ~ 1 之间的随机数。
round(x) // 把数四舍五入为最接近的整数。
sin(x) // 返回数的正弦。
sqrt(x) // 返回数的平方根。
tan(x) // 返回角的正切。
exp(num) // 返回Math.E 的num 次幂
log(num) // 返回num 的自然对数
```
